
You said:
import React,{useEffect,useMemo,useRef,useState}from"react";const fmt=n=>n.toLocaleString(void 0,{maximumFractionDigits:0});const money=n=>${n<0?"-":""}$${fmt(Math.abs(n))};const clamp=(v,min,max)=>Math.max(min,Math.min(max,v));const rand=(min,max)=>Math.random()*(max-min)+min;const randi=(min,max)=>Math.floor(rand(min,max+1));const pick=arr=>arr[randi(0,arr.length-1)];const uuid=()=>Math.random().toString(36).slice(2)+Date.now().toString(36);function genFace(seed=Math.random()){const skin=["#f4d1b5","#e0ac69","#c68642","#8d5524"];const hair=["#1f2937","#4b5563","#6b4f2a","#b5651d","#111827"];const eyes=["â€¢ â€¢","â€¢_â€¢","â€¢â€¿â€¢","â€¢á´—â€¢","â€¢ã……â€¢"];const mouths=["â€¿","_","ï¸¿","ï¹€","Ï‰"];return{skin:pick(skin),hair:pick(hair),eye:pick(eyes),mouth:pick(mouths),seed}}const START_YEAR=2010,START_MONTH=1,START_WEEK=1,START_MONEY=100000,START_FANS=0;const GENRES=[{id:"sim",name:"Simulation"},{id:"rpg",name:"RPG"},{id:"act",name:"Action"},{id:"str",name:"Strategy"},{id:"adv",name:"Adventure"},{id:"puz",name:"Puzzle"}];const PLATFORMS=[{id:"pc",name:"PC",share:.35,devFee:0,royalty:.08},{id:"mbl",name:"Mobile",share:.3,devFee:2000,royalty:.15},{id:"con",name:"Console",share:.25,devFee:10000,royalty:.12},{id:"indie",name:"Indie Portal",share:.1,devFee:500,royalty:.05}];const FIT={sim:{pc:1.1,con:.95,mbl:1.0,indie:1.05},rpg:{pc:1.1,con:1.0,mbl:.9,indie:1.0},act:{pc:1.0,con:1.1,mbl:.95,indie:.95},str:{pc:1.15,con:.9,mbl:.9,indie:1.05},adv:{pc:1.05,con:1.0,mbl:1.0,indie:1.05},puz:{pc:.95,con:.95,mbl:1.15,indie:1.1}};const SIZES=[{id:"small",name:"Small",weeks:8,baseCost:10000},{id:"med",name:"Medium",weeks:16,baseCost:30000},{id:"large",name:"Large",weeks:28,baseCost:80000}];const ROLES=[{id:"design",name:"Designer"},{id:"code",name:"Programmer"},{id:"art",name:"Artist"},{id:"qa",name:"QA"}];function mkStaff(name,skills={},salary=1200,locked=false){return{id:uuid(),name,skills:{design:20,code:20,art:20,qa:20,...skills},morale:100,salary,locked,training:null,face:genFace()}}const START_STAFF=[mkStaff("You",{design:45,code:45,art:30,qa:35},1500,true)];const CAMPAIGNS={small:{id:"small",name:"Social Media",cost:5000,prep:2,hype:10},medium:{id:"medium",name:"Conventions",cost:15000,prep:4,hype:25},large:{id:"large",name:"TV Ads",cost:40000,prep:8,hype:50}};const SAVE_KEY="gdt-lite-save-v1";const loadSave=()=>{try{const raw=localStorage.getItem(SAVE_KEY);if(!raw)return null;const parsed=JSON.parse(raw);if(parsed){if(parsed.week>4)parsed.week=((parsed.week-1)%4)+1;parsed.month=parsed.month||START_MONTH;parsed.staff=(parsed.staff||START_STAFF).map(s=>({...s,face:s.face||genFace()}));const fix=p=>({...p,salesHistory:Array.isArray(p.salesHistory)?p.salesHistory:[],naturalHype:typeof p.naturalHype==='number'?p.naturalHype:0,marketingHype:typeof p.marketingHype==='number'?p.marketingHype:0,marketing:p.marketing||{type:null,weeksLeft:0}});parsed.projects=(parsed.projects||[]).map(fix);parsed.released=(parsed.released||[]).map(fix)}return parsed}catch(e){console.warn("Load failed",e);return null}};const saveGame=s=>{try{localStorage.setItem(SAVE_KEY,JSON.stringify(s))}catch{}};export default function GameDevTycoonLite(){const loaded=useMemo(()=>loadSave(),[]);const[year,setYear]=useState(loaded?.year??START_YEAR);const[month,setMonth]=useState(loaded?.month??START_MONTH);const[week,setWeek]=useState(loaded?.week??START_WEEK);const[weekFrac,setWeekFrac]=useState(0);const[money$,setMoney]=useState(loaded?.money??START_MONEY);const[fans,setFans]=useState(loaded?.fans??START_FANS);const[studioName,setStudioName]=useState(loaded?.studioName??"Pixel Sprout Studio");const[speed,setSpeed]=useState(loaded?.speed??1);const[tab,setTab]=useState(loaded?.tab??"studio");const[salaryFlash,setSalaryFlash]=useState(false);const[staff,setStaff]=useState((loaded?.staff??START_STAFF).map(s=>({...s,face:s.face||genFace()})));const[hireList,setHireList]=useState((loaded?.hireList??HIRE_POOL()).map(s=>({...s,face:s.face||genFace()})));const[projects,setProjects]=useState((loaded?.projects??[]).map(p=>({...p,salesHistory:Array.isArray(p.salesHistory)?p.salesHistory:[],naturalHype:typeof p.naturalHype==='number'?p.naturalHype:0,marketingHype:typeof p.marketingHype==='number'?p.marketingHype:0,marketing:p.marketing||{type:null,weeksLeft:0}})));const[released,setReleased]=useState((loaded?.released??[]).map(p=>({...p,salesHistory:Array.isArray(p.salesHistory)?p.salesHistory:[],naturalHype:typeof p.naturalHype==='number'?p.naturalHype:0,marketingHype:typeof p.marketingHype==='number'?p.marketingHype:0,marketing:p.marketing||{type:null,weeksLeft:0}})));const[research,setResearch]=useState(loaded?.research??{engineLvl:1,topics:{puz:true}});const[msg,setMsg]=useState("");const[showNewProject,setShowNewProject]=useState(false);const weekStartRef=useRef(performance.now());const weekDurRef=useRef(1000/Math.max(1,speed));useEffect(()=>{saveGame({year,month,week,money:money$,fans,studioName,speed,tab,staff,hireList,projects,released,research})},[year,month,week,money$,fans,studioName,speed,tab,staff,hireList,projects,released,research]);useEffect(()=>{if(speed===0)return;weekDurRef.current=1000/Math.max(1,speed);weekStartRef.current=performance.now();let raf=0;const loop=()=>{const now=performance.now();const t=(now-weekStartRef.current)/weekDurRef.current;setWeekFrac(clamp(t,0,1));raf=requestAnimationFrame(loop)};raf=requestAnimationFrame(loop);return()=>cancelAnimationFrame(raf)},[speed,week]);useEffect(()=>{if(speed===0)return;const int=setInterval(tick,1000/speed);return()=>clearInterval(int)},[speed,projects,staff,money$,year,month,week,fans]);function advanceCalendar(){let w=week+1,m=month,y=year;if(w>4){w=1;m+=1}if(m>12){m=1;y+=1}setWeek(w);setMonth(m);setYear(y);weekStartRef.current=performance.now();setWeekFrac(0);if(w===1)paySalaries()}function paySalaries(){const total=staff.reduce((s,e)=>s+e.salary,0);if(total>0){setMoney(m=>m-total);setSalaryFlash(true);setTimeout(()=>setSalaryFlash(false),1400)}}function tick(){advanceCalendar();let income=0;const newProjects=projects.map(p=>{if(p.marketing?.weeksLeft>0){p.marketing={...p.marketing,weeksLeft:p.marketing.weeksLeft-1};if(p.marketing.weeksLeft<=0){const c=CAMPAIGNS[p.marketing.type];const gain=c?c.hype:0;p.marketingHype=clamp((p.marketingHype||0)+gain,0,100);pushMsg(${p.name}: ${c?.name||"Campaign"} completed! +${gain} marketing hype);p.marketing={type:null,weeksLeft:0}}}if(p.state==="dev"){const d=sumSkill("design")*rand(.6,1.0);const c=sumSkill("code")*rand(.6,1.0);const a=sumSkill("art")*rand(.6,1.0);const q=sumSkill("qa")*rand(.5,.9);const featureGain=Math.round((d+c+a)/50);const bugGain=Math.max(0,Math.round((c*.2+a*.2)/60-q/120+rand(-1,2)));p.progress=clamp((p.progress||0)+1,0,p.weeks);p.features=(p.features||0)+featureGain;p.bugs=(p.bugs||0)+bugGain;const progRatio=p.weeks?p.progress/p.weeks:0;const sizeFactor=p.size==='small'?0.6:p.size==='med'?1.0:1.4;const naturalGain=Math.max(0,Math.round((featureGain*.15+progRatio*2)*sizeFactor));p.naturalHype=clamp((p.naturalHype||0)+naturalGain,0,100);if(p.progress>=p.weeks){p.state="polish";pushMsg('${p.name}' entered polishing! QA can now reduce bugs.)}}else if(p.state==="polish"){const q=sumSkill("qa")*rand(.8,1.2);const bugFix=Math.max(0,Math.round(q/40+rand(0,2)));p.bugs=Math.max(0,(p.bugs||0)-bugFix);p.naturalHype=clamp((p.naturalHype||0)+randi(0,1),0,100);if(p.bugs<=Math.max(1,Math.round((p.features||0)*.1))&&Math.random()<.1)releaseProject(p)}else if(p.state==="released"){p.naturalHype=Math.max(0,Math.floor((p.naturalHype||0)*.99));p.marketingHype=Math.max(0,Math.floor((p.marketingHype||0)*.98));const t=((month-p.releaseMonth)+(year-p.releaseYear)*12)*4+(week-p.releaseWeek);if(t>=0&&t<=52){const totalHype=clamp((p.naturalHype||0)+(p.marketingHype||0),0,100);const decayBoost=1+(totalHype*.2)/100;const demand=p.salesPeak*Math.exp(-t/(6*decayBoost));const platform=PLATFORMS.find(x=>x.id===p.platform);const revenue=Math.round(demand*p.price*(1-platform.royalty));income+=revenue;p.salesTotal=(p.salesTotal||0)+demand;const hist=Array.isArray(p.salesHistory)?p.salesHistory:[];p.salesHistory=[...hist,Math.round(demand)].slice(-26)}}return{...p}});setProjects(newProjects);setMoney(m=>m+Math.round(income))}function sumSkill(role){return staff.reduce((s,e)=>s+(e.skills[role]??0),0)}function pushMsg(t){setMsg(t);setTimeout(()=>setMsg(m=>m===t?"":m),3000)}function startProject({name,genre,platform,size}){const g=GENRES.find(x=>x.id===genre);const pl=PLATFORMS.find(x=>x.id===platform);const sz=SIZES.find(x=>x.id===size);const devFee=pl.devFee;const cost=sz.baseCost+devFee;if(money$<cost)return pushMsg("Not enough money for that scope!");setMoney(m=>m-cost);const weeks=Math.round(sz.weeks*clamp(1.1-research.engineLvl*.05,.7,1.2));const project={id:uuid(),name,genre:g.id,platform:pl.id,size:sz.id,price:sz.id==="small"?9:sz.id==="med"?19:29,state:"dev",weeks,progress:0,features:0,bugs:0,releaseYear:null,releaseMonth:null,releaseWeek:null,salesPeak:0,salesTotal:0,review:null,salesHistory:[],naturalHype:0,marketingHype:0,marketing:{type:null,weeksLeft:0}};setProjects(arr=>[...arr,project]);setShowNewProject(false);pushMsg(Started '${name}' on ${pl.name} (${g.name}, ${sz.name}).)}function releaseProject(p){const fit=FIT[p.genre][p.platform]??1;const featureScore=clamp((p.features||0)/(p.weeks*.9),0,1);const bugPenalty=clamp((p.bugs||0)/Math.max(1,p.features||1),0,1);const base=6*featureScore+rand(0,3);const review=clamp((base*fit-bugPenalty*2)*(1+research.engineLvl*.03),0,10);const platform=PLATFORMS.find(x=>x.id===p.platform);const genreAppeal=.9+(FIT[p.genre][p.platform]-1)*.6;const fansBoost=1+Math.log10(Math.max(1,fans+1));const qualityBoost=.6+review/10;const scope=p.size==="small"?12000:p.size==="med"?40000:120000;const basePeak=Math.round(scope*platform.share*genreAppeal*qualityBoost*fansBoost*rand(.8,1.2));const totalHype=clamp((p.naturalHype||0)+(p.marketingHype||0),0,100);const hypeLaunchBoost=1+(totalHype*.4)/100;p.state="released";p.releaseYear=year;p.releaseMonth=month;p.releaseWeek=week;p.salesPeak=Math.round(basePeak*hypeLaunchBoost);p.review=Number(review.toFixed(1));p.salesHistory=[];const hypeFanBonus=Math.round(totalHype*3);setFans(f=>Math.max(0,Math.round(f+(review-6)*200+hypeFanBonus)));setReleased(arr=>[{...p},...arr]);pushMsg(Released '${p.name}' â€” Review ${p.review}/10 (Hype ${totalHype}))}function cancelProject(id){setProjects(arr=>arr.filter(p=>p.id!==id));pushMsg("Project canceled.")}function hire(person){const hiringCost=2000;if(money$<hiringCost)return pushMsg("Not enough money to hire.");setMoney(m=>m-hiringCost);setStaff(s=>[...s,{...person,face:person.face||genFace()}]);setHireList(h=>h.filter(x=>x.id!==person.id));pushMsg(Hired ${person.name}!)}function fireStaff(id){const e=staff.find(x=>x.id===id);if(e?.locked)return pushMsg("You can't fire the founder!");setStaff(s=>s.filter(x=>x.id!==id))}function trainStaff(id,role){setStaff(arr=>arr.map(e=>e.id===id?{...e,training:{role,weeksLeft:4}}:e))}useEffect(()=>{if(speed===0)return;const int=setInterval(()=>{setStaff(arr=>arr.map(e=>{if(!e.training)return e;const t={...e.training,weeksLeft:e.training.weeksLeft-1};if(t.weeksLeft<=0){const inc=randi(2,6);const role=e.training.role;const skills={...e.skills,[role]:e.skills[role]+inc};pushMsg(${e.name} improved ${role} by +${inc});return{...e,skills,training:null}}return{...e,training:t}}))},1000/speed);return()=>clearInterval(int)},[speed]);function resetSave(){localStorage.removeItem(SAVE_KEY);window.location.reload()}function launchCampaign(p,key){const c=CAMPAIGNS[key];if(!c)return;if(p.marketing?.weeksLeft>0)return pushMsg(${p.name} already has an active campaign.);if(money$<c.cost)return pushMsg("Not enough money for that campaign.");setMoney(m=>m-c.cost);setProjects(arr=>arr.map(x=>x.id===p.id?{...x,marketing:{type:key,weeksLeft:c.prep}}:x));pushMsg(${p.name}: Launched ${c.name} (prep ${c.prep}w))}const last24wTop=useMemo(()=>{const sumLast=arr=>(arr||[]).slice(-24).reduce((s,v)=>s+(v||0),0);return[...released].map(p=>({id:p.id,name:p.name,copies:Math.round(sumLast(p.salesHistory||[]))})).sort((a,b)=>b.copies-a.copies).slice(0,10)},[released,week,month,year]);return(<div className="min-h-screen w-full bg-neutral-100 text-neutral-900"><NavBar tab={tab} setTab={setTab}/><div className="sticky top-0 z-10 border-b bg-white/80 backdrop-blur pl-20"><div className="mx-auto flex max-w-6xl items-center justify-between gap-4 px-4 py-3"><div className="flex items-center gap-3"><div className="h-8 w-8 rounded-xl bg-indigo-600"/><input value={studioName} onChange={e=>setStudioName(e.target.value.slice(0,30))} className="rounded-xl border px-3 py-1 text-lg font-semibold"/><span className="text-sm text-neutral-500">Year {year}, Month {month}, Week {week}</span><div className="ml-2 h-1 w-28 rounded-full bg-neutral-200"><div className="h-1 rounded-full bg-indigo-600" style={{width:${clamp(weekFrac*100,0,100)}%}}/></div></div><div className="flex items-center gap-3 text-sm"><div className="relative"><span className="rounded-xl bg-emerald-100 px-3 py-1 font-semibold text-emerald-700">{money(money$)}</span>{salaryFlash&&(<div className="absolute left-0 right-0 translate-y-1 text-center text-xs font-semibold text-red-600">â€“ Salaries paid</div>)}</div><span className="rounded-xl bg-sky-100 px-3 py-1 font-semibold text-sky-700">{fmt(fans)} fans</span><div className="flex items-center gap-1"><label className="text-neutral-500">Speed</label><select className="rounded-lg border px-2 py-1" value={speed} onChange={e=>setSpeed(Number(e.target.value))}><option value={0}>Pause</option><option value={1}>1x</option><option value={2}>2x</option><option value={4}>4x</option></select></div><button onClick={resetSave} className="rounded-lg border px-3 py-1 hover:bg-red-50">Reset</button></div></div></div><div className="mx-auto max-w-6xl px-4 py-4 pl-20 pr-96"><div className="grid grid-cols-12 gap-4"><div className="col-span-12 lg:col-span-4 xl:col-span-3"><div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Studio</h2><ul className="space-y-2 text-sm"><li className="flex items-center justify-between"><span>Staff</span><span className="font-semibold">{staff.length}</span></li><li className="flex items-center justify-between"><span>Monthly Salaries</span><span className="font-semibold">{money(Math.round(staff.reduce((s,e)=>s+e.salary,0)))}</span></li><li className="flex items-center justify-between"><span>Design Power</span><span className="font-semibold">{fmt(sumSkill("design"))}</span></li><li className="flex items-center justify-between"><span>Code Power</span><span className="font-semibold">{fmt(sumSkill("code"))}</span></li><li className="flex items-center justify-between"><span>Art Power</span><span className="font-semibold">{fmt(sumSkill("art"))}</span></li><li className="flex items-center justify-between"><span>QA Power</span><span className="font-semibold">{fmt(sumSkill("qa"))}</span></li></ul><div className="mt-4 flex gap-2"><button onClick={()=>setShowNewProject(true)} className="flex-1 rounded-xl bg-indigo-600 px-4 py-2 text-white shadow hover:opacity-90">New Project</button></div>{msg&&<div className="mt-3 rounded-xl bg-yellow-50 p-3 text-sm text-yellow-800">{msg}</div>}</div></div><div className="col-span-12 lg:col-span-8 xl:col-span-9">{tab==="studio"&&<Studio projects={projects} release={releaseProject} cancel={cancelProject}/>} {tab==="projects"&&<Projects projects={projects} released={released}/>} {tab==="market"&&<Market/>} {tab==="marketing"&&<MarketingTab projects={projects} onLaunch={launchCampaign}/>} {tab==="research"&&<Research research={research} setResearch={setResearch} money$={money$} setMoney={setMoney}/>} {tab==="staff"&&<StaffTab staff={staff} hireList={hireList} hire={hire} fire={fireStaff} train={trainStaff} money$={money$}/>} {tab==="reports"&&<Reports released={released}/>}</div></div></div><RightFloatingPanel top10={last24wTop} projects={projects} released={released}/>{showNewProject&&(<NewProjectModal onClose={()=>setShowNewProject(false)} onStart={startProject}/>)}</div>)}function NavBar({tab,setTab}){const items=[{id:'studio',label:'Studio',icon:'ğŸ '},{id:'projects',label:'Projects',icon:'ğŸ“¦'},{id:'market',label:'Market',icon:'ğŸ“Š'},{id:'marketing',label:'Marketing',icon:'ğŸ“£'},{id:'research',label:'Research',icon:'ğŸ§ª'},{id:'staff',label:'Staff',icon:'ğŸ‘¥'},{id:'reports',label:'Reports',icon:'ğŸ“œ'}];return(<div className="fixed left-0 top-0 z-20 h-screen w-16 hover:w-56 transition-all duration-200 bg-white/90 border-r backdrop-blur"><div className="flex h-full flex-col gap-2 p-2">{items.map(it=>(<button key={it.id} onClick={()=>setTab(it.id)} className={flex items-center gap-3 rounded-xl px-3 py-2 text-sm ${tab===it.id?'bg-neutral-900 text-white':'hover:bg-neutral-100'}} title={it.label}><span className="text-lg w-5 text-center">{it.icon}</span><span className="whitespace-nowrap overflow-hidden">{it.label}</span></button>))}</div></div>)}function RightFloatingPanel({top10,projects,released}){const yourGames=[...projects.filter(p=>p.state!=='released'),...released];return(<div className="fixed right-0 top-14 bottom-0 z-30 w-80 overflow-y-auto border-l bg-white/90 backdrop-blur p-3 shadow-lg space-y-3"><div className="rounded-2xl border bg-white shadow-sm p-3"><div className="font-semibold mb-2">Top 10 â€” Last 6 Months</div>{top10.length===0&&<div className="text-sm text-neutral-500">No data yet.</div>}<div className="grid gap-2">{top10.map((g,i)=>(<div key={g.id} className="rounded-lg border p-2 flex items-center justify-between"><div className="truncate text-sm"><div className="font-medium truncate">#{i+1} {g.name}</div></div><span className="text-xs font-semibold text-neutral-600">{fmt(g.copies)}</span></div>))}</div></div><div className="rounded-2xl border bg-white shadow-sm p-3"><div className="font-semibold mb-2">Your Games</div>{yourGames.length===0&&<div className="text-sm text-neutral-500">No games yet.</div>}<div className="space-y-2">{yourGames.map(p=>(<div key={p.id} className="rounded-lg border p-2 text-sm"><div className="flex items-center justify-between"><div className="font-medium truncate">{p.name}</div><div className="text-xs text-neutral-500">{p.state}</div></div><div className="text-xs text-neutral-500">{(p.genre||"").toUpperCase()} Â· {(p.platform||"").toUpperCase()} Â· {p.size}</div><div className="mt-1 space-y-1"><HypeBar label="Nat" value={p.naturalHype||0} color="bg-amber-400"/><HypeBar label="Mkt" value={p.marketingHype||0} color="bg-indigo-500"/></div></div>))}</div></div></div>)}function Studio({projects,release,cancel}){const active=projects.filter(p=>p.state!=="released");return(<div className="space-y-4"><div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Active Projects</h2>{active.length===0&&<p className="text-sm text-neutral-500">No active projects. Start one from the sidebar!</p>}<div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3">{active.map(p=>(<div key={p.id} className="rounded-xl border p-3"><div className="flex items-center justify-between"><div><div className="font-semibold">{p.name}</div><div className="text-xs text-neutral-500">{p.genre?.toUpperCase()} Â· {p.platform?.toUpperCase()} Â· {p.size}</div></div><span className="text-xs text-neutral-500">{p.state}</span></div><div className="mt-2"><Progress value={((p.progress||0)/(p.weeks||1))*100}/><div className="mt-1 flex justify-between text-xs text-neutral-600"><span>Week {p.progress||0}/{p.weeks}</span><span>Feat {p.features||0} Â· Bugs {p.bugs||0}</span></div></div><div className="mt-2 space-y-1"><HypeBar label="Natural" value={p.naturalHype||0} color="bg-amber-400"/><HypeBar label="Marketing" value={p.marketingHype||0} color="bg-indigo-500"/>{p.marketing?.weeksLeft>0&&(<div className="text-[11px] text-neutral-500">Campaign: {CAMPAIGNS[p.marketing.type]?.name} â€” {p.marketing.weeksLeft}w left</div>)}</div><div className="mt-3 flex gap-2">{p.state!=="released"&&<button onClick={()=>release(p)} className="flex-1 rounded-lg bg-emerald-600 px-3 py-1.5 text-sm text-white hover:opacity-90">Release</button>}<button onClick={()=>cancel(p.id)} className="flex-1 rounded-lg border px-3 py-1.5 text-sm hover:bg-neutral-50">Cancel</button></div></div>))}</div></div><div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Recent Releases</h2><div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3">{projects.filter(p=>p.state==="released").slice(0,6).map(p=>(<ReleaseCard key={p.id} p={p}/>))}</div></div></div>)}function Projects({projects,released}){return(<div className="space-y-4"><div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">All Releases</h2>{released.length===0&&<p className="text-sm text-neutral-500">Nothing released yet.</p>}<div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3">{released.map(p=><ReleaseCard key={p.id+"r"} p={p}/>)}</div></div><div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Active / In Progress</h2><div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3">{projects.filter(p=>p.state!=="released").map(p=><ReleaseCard key={p.id+"a"} p={p} showProgress/>)}</div></div></div>)}function ReleaseCard({p,showProgress}){const hist=p.salesHistory||[];const maxV=Math.max(1,...hist);return(<div className="rounded-xl border p-3"><div className="flex items-center justify-between"><div><div className="font-semibold">{p.name}</div><div className="text-xs text-neutral-500">{p.genre?.toUpperCase()} Â· {p.platform?.toUpperCase()} Â· {p.size}</div></div>{p.review!=null&&<span className={rounded-lg px-2 py-1 text-xs font-semibold ${p.review>=8?"bg-emerald-100 text-emerald-700":p.review>=6?"bg-sky-100 text-sky-700":"bg-amber-100 text-amber-700"}}>{p.review}/10</span>}</div>{showProgress&&(<div className="mt-2"><Progress value={((p.progress||0)/(p.weeks||1))*100}/><div className="mt-1 flex justify-between text-xs text-neutral-600"><span>Week {p.progress||0}/{p.weeks}</span><span>Feat {p.features||0} Â· Bugs {p.bugs||0}</span></div></div>)}<div className="mt-2 space-y-1"><HypeBar label="Natural" value={p.naturalHype||0} color="bg-amber-400"/><HypeBar label="Marketing" value={p.marketingHype||0} color="bg-indigo-500"/>{p.marketing?.weeksLeft>0&&(<div className="text-[11px] text-neutral-500">Campaign: {CAMPAIGNS[p.marketing.type]?.name} â€” {p.marketing.weeksLeft}w left</div>)}</div>{p.state==="released"&&(<><div className="mt-2 text-xs text-neutral-600">Units sold: {fmt(Math.round(p.salesTotal||0))} Â· Peak/week: {fmt(p.salesPeak||0)}</div><div className="mt-2 h-16 flex items-end gap-1">{hist.slice(-26).map((v,i)=>(<div key={i} className="flex-1 bg-indigo-500 rounded-sm" style={{height:${Math.round((v/maxV)*100)}%}} title={W-${i+1}: ${fmt(v)} units}/>))}{hist.length===0&&<div className="text-xs text-neutral-400">No recent sales</div>}</div></>)}</div>)}function Market(){return(<div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Market Overview</h2><div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3">{PLATFORMS.map(pl=>(<div key={pl.id} className="rounded-xl border p-3"><div className="flex items-center justify-between"><div className="font-semibold">{pl.name}</div><span className="text-xs text-neutral-500">Dev fee {money(pl.devFee)}</span></div><div className="mt-1 text-sm">Market share: {(pl.share*100).toFixed(0)}%</div><div className="text-xs text-neutral-600">Royalty: {(pl.royalty*100).toFixed(0)}%</div></div>))}</div><h3 className="mt-6 text-sm font-semibold text-neutral-500">Genre Fit by Platform</h3><div className="mt-2 overflow-auto rounded-xl border"><table className="w-full text-sm"><thead className="bg-neutral-50"><tr><th className="p-2 text-left">Genre</th>{PLATFORMS.map(pl=><th key={pl.id} className="p-2 text-left">{pl.name}</th>)}</tr></thead><tbody>{GENRES.map(g=>(<tr key={g.id} className="odd:bg-white even:bg-neutral-50"><td className="p-2 font-medium">{g.name}</td>{PLATFORMS.map(pl=>(<td key={pl.id} className="p-2">x{(FIT[g.id][pl.id]).toFixed(2)}</td>))}</tr>))}</tbody></table></div></div>)}function MarketingTab({projects,onLaunch}){const any=projects.length>0;return(<div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Marketing Campaigns</h2>{!any&&<p className="text-sm text-neutral-500">No active projects.</p>}<div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3">{projects.map(p=>(<div key={p.id} className="rounded-xl border p-3"><div className="font-semibold">{p.name}</div><div className="mt-2 space-y-1"><HypeBar label="Natural" value={p.naturalHype||0} color="bg-amber-400"/><HypeBar label="Marketing" value={p.marketingHype||0} color="bg-indigo-500"/>{p.marketing?.weeksLeft>0&&(<div className="text-[11px] text-neutral-500">Campaign: {CAMPAIGNS[p.marketing.type]?.name} â€” {p.marketing.weeksLeft}w left</div>)}</div><div className="mt-3 grid grid-cols-1 gap-2 text-sm"><button disabled={p.marketing?.weeksLeft>0} onClick={()=>onLaunch(p,'small')} className={rounded px-3 py-2 border ${p.marketing?.weeksLeft>0?'opacity-50 cursor-not-allowed':'hover:bg-neutral-50'}}>Social Media ({money(5000)}) Â· 2w Â· +10</button><button disabled={p.marketing?.weeksLeft>0} onClick={()=>onLaunch(p,'medium')} className={rounded px-3 py-2 border ${p.marketing?.weeksLeft>0?'opacity-50 cursor-not-allowed':'hover:bg-neutral-50'}}>Conventions ({money(15000)}) Â· 4w Â· +25</button><button disabled={p.marketing?.weeksLeft>0} onClick={()=>onLaunch(p,'large')} className={rounded px-3 py-2 border ${p.marketing?.weeksLeft>0?'opacity-50 cursor-not-allowed':'hover:bg-neutral-50'}}>TV Ads ({money(40000)}) Â· 8w Â· +50</button></div></div>))}</div></div>)}function Research({research,setResearch,money$,setMoney}){function upgradeEngine(){const cost=(research.engineLvl+1)*20000;if(money$<cost)return;setMoney(m=>m-cost);setResearch(r=>({...r,engineLvl:r.engineLvl+1}))}function unlockTopic(id){const cost=10000;if(money$<cost)return;setMoney(m=>m-cost);setResearch(r=>({...r,topics:{...r.topics,[id]:true}}))}const lockedTopics=GENRES.filter(g=>!research.topics[g.id]);return(<div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Research</h2><div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3"><div className="rounded-xl border p-3"><div className="flex items-center justify-between"><div className="font-semibold">Engine Level</div><div className="rounded-lg bg-neutral-900 px-2 py-1 text-xs text-white">Lv {research.engineLvl}</div></div><p className="mt-1 text-sm text-neutral-600">Improves review multiplier and reduces dev time slightly.</p><button onClick={upgradeEngine} className="mt-2 w-full rounded-lg bg-indigo-600 px-3 py-2 text-sm text-white hover:opacity-90">Upgrade ({money((research.engineLvl+1)*20000)})</button></div><div className="rounded-xl border p-3"><div className="font-semibold">New Topics</div><p className="mt-1 text-sm text-neutral-600">Unlock more genres to build with.</p>{lockedTopics.length===0&&<div className="mt-2 text-sm text-neutral-500">All core genres unlocked!</div>}<div className="mt-2 grid grid-cols-2 gap-2">{lockedTopics.map(t=>(<button key={t.id} onClick={()=>unlockTopic(t.id)} className="rounded-lg border px-3 py-2 text-sm hover:bg-neutral-50">Unlock {t.name} ({money(10000)})</button>))}</div></div></div></div>)}function StaffTab({staff,hireList,hire,fire,train,money$}){return(<div className="space-y-4"><div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Team</h2><div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3">{staff.map(e=>(<div key={e.id} className="rounded-xl border p-3"><div className="flex items-center justify-between"><div className="flex items-center gap-2"><FaceAvatar face={e.face}/><div className="font-semibold">{e.name}</div></div><span className="text-xs text-neutral-500">${e.salary}/mo</span></div><div className="mt-2 grid grid-cols-2 gap-1 text-sm"><Skill label="Design" v={e.skills.design}/><Skill label="Code" v={e.skills.code}/><Skill label="Art" v={e.skills.art}/><Skill label="QA" v={e.skills.qa}/></div><div className="mt-3 flex gap-2"><button onClick={()=>train(e.id,"design")} className="flex-1 rounded-lg border px-3 py-1.5 text-sm hover:bg-neutral-50">Train Design</button><button onClick={()=>train(e.id,"code")} className="flex-1 rounded-lg border px-3 py-1.5 text-sm hover:bg-neutral-50">Train Code</button></div><div className="mt-2 flex gap-2"><button onClick={()=>train(e.id,"art")} className="flex-1 rounded-lg border px-3 py-1.5 text-sm hover:bg-neutral-50">Train Art</button><button onClick={()=>train(e.id,"qa")} className="flex-1 rounded-lg border px-3 py-1.5 text-sm hover:bg-neutral-50">Train QA</button></div>{!e.locked&&<button onClick={()=>fire(e.id)} className="mt-2 w-full rounded-lg bg-red-50 px-3 py-1.5 text-sm text-red-700 hover:bg-red-100">Fire</button>}{e.training&&<div className="mt-2 rounded-lg bg-blue-50 p-2 text-xs text-blue-800">Training {e.training.role} â€” {e.training.weeksLeft}w left</div>}</div>))}</div></div><div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Hire</h2><div className="grid gap-3 md:grid-cols-2 xl:grid-cols-3">{hireList.map(e=>(<div key={e.id} className="rounded-xl border p-3"><div className="flex items-center justify-between"><div className="flex items-center gap-2"><FaceAvatar face={e.face}/><div className="font-semibold">{e.name}</div></div><span className="text-xs text-neutral-500">${e.salary}/mo</span></div><div className="mt-2 grid grid-cols-2 gap-1 text-sm"><Skill label="Design" v={e.skills.design}/><Skill label="Code" v={e.skills.code}/><Skill label="Art" v={e.skills.art}/><Skill label="QA" v={e.skills.qa}/></div><button onClick={()=>hire(e)} className="mt-3 w-full rounded-lg bg-emerald-600 px-3 py-1.5 text-sm text-white hover:opacity-90">Hire (+$2,000)</button></div>))}</div>{hireList.length===0&&<p className="text-sm text-neutral-500">No candidates right now. Check again after some weeks!</p>}</div></div>)}function Reports({released}){const totalRevenue=released.reduce((s,p)=>s+Math.round((p.salesTotal||0)*p.price*.9),0);const avgReview=released.length?(released.reduce((s,p)=>s+(p.review??0),0)/released.length).toFixed(1):"-";return(<div className="rounded-2xl border bg-white p-4 shadow-sm"><h2 className="mb-3 text-lg font-semibold">Reports</h2><div className="grid gap-3 md:grid-cols-3"><div className="rounded-xl border p-3"><div className="text-sm text-neutral-500">Total Revenue (est.)</div><div className="text-xl font-bold">{money(totalRevenue)}</div></div><div className="rounded-xl border p-3"><div className="text-sm text-neutral-500">Titles Released</div><div className="text-xl font-bold">{released.length}</div></div><div className="rounded-xl border p-3"><div className="text-sm text-neutral-500">Average Review</div><div className="text-xl font-bold">{avgReview}</div></div></div><h3 className="mt-4 text-sm font-semibold text-neutral-500">Catalog</h3><div className="mt-2 overflow-auto rounded-xl border"><table className="w-full text-sm"><thead className="bg-neutral-50"><tr><th className="p-2 text-left">Title</th><th className="p-2 text-left">Genre</th><th className="p-2 text-left">Platform</th><th className="p-2 text-left">Review</th><th className="p-2 text-left">Price</th><th className="p-2 text-left">Units</th><th className="p-2 text-left">Revenue</th></tr></thead><tbody>{released.map(p=>(<tr key={p.id} className="odd:bg-white even:bg-neutral-50"><td className="p-2 font-medium">{p.name}</td><td className="p-2">{p.genre?.toUpperCase()}</td><td className="p-2">{p.platform?.toUpperCase()}</td><td className="p-2">{p.review}</td><td className="p-2">${p.price}</td><td className="p-2">{fmt(Math.round(p.salesTotal||0))}</td><td className="p-2">{money(Math.round((p.salesTotal||0)*p.price*.9))}</td></tr>))}</tbody></table></div></div>)}function Skill({label,v}){return(<div className="flex items-center justify-between rounded-lg bg-neutral-50 px-2 py-1"><span>{label}</span><span className="font-semibold">{v}</span></div>)}function Progress({value}){return(<div className="h-2 w-full rounded-full bg-neutral-200"><div className="h-2 rounded-full bg-indigo-600" style={{width:${clamp(value,0,100)}%}}/></div>)}function HypeBar({label,value,color}){return(<div className="w-full"><div className="flex items-center justify-between text-[11px] text-neutral-600"><span>{label}</span><span>{Math.round(value)}%</span></div><div className="h-1.5 w-full rounded-full bg-neutral-200"><div className={h-1.5 rounded-full ${color}} style={{width:${clamp(value,0,100)}%}}/></div></div>)}function FaceAvatar({face}){const f=face||genFace();return(<div className="h-8 w-8 rounded-full border flex flex-col items-center justify-center leading-none text-[10px]" style={{background:f.skin,color:f.hair}} title={:${f.eye}:${f.mouth}}><div style={{transform:"translateY(2px)"}}>{f.eye}</div><div style={{transform:"translateY(-2px)"}}>{f.mouth}</div></div>)}function NewProjectModal({onClose,onStart}){const[name,setName]=useState(()=>defaultName());const[genre,setGenre]=useState(GENRES[0].id);const[platform,setPlatform]=useState(PLATFORMS[0].id);const[size,setSize]=useState(SIZES[0].id);function defaultName(){const adjectives=["Tiny","Mega","Galactic","Mystic","Neon","Quantum","Cozy","Fuzzy","Retro","Hyper"];const nouns=["Farm","Quest","Racer","Tycoon","Heroes","Factory","Legends","Blocks","Empire","Odyssey"];return${pick(adjectives)} ${pick(nouns)}}return(<div className="fixed inset-0 z-20 flex items-center justify-center bg-black/40 p-4"><div className="w-full max-w-lg rounded-2xl border bg-white p-4 shadow-xl"><div className="flex items-center justify-between"><h2 className="text-lg font-semibold">New Project</h2><button onClick={onClose} className="rounded-lg border px-2 py-1 text-sm hover:bg-neutral-50">Close</button></div><div className="mt-3 grid grid-cols-2 gap-3 text-sm"><label className="col-span-2"><div className="text-neutral-500">Title</div><input value={name} onChange={e=>setName(e.target.value)} className="w-full rounded-lg border px-3 py-2"/></label><label><div className="text-neutral-500">Genre</div><select value={genre} onChange={e=>setGenre(e.target.value)} className="w-full rounded-lg border px-3 py-2">{GENRES.map(g=><option key={g.id} value={g.id}>{g.name}</option>)}</select></label><label><div className="text-neutral-500">Platform</div><select value={platform} onChange={e=>setPlatform(e.target.value)} className="w-full rounded-lg border px-3 py-2">{PLATFORMS.map(p=><option key={p.id} value={p.id}>{p.name}</option>)}</select></label><label><div className="text-neutral-500">Scope</div><select value={size} onChange={e=>setSize(e.target.value)} className="w-full rounded-lg border px-3 py-2">{SIZES.map(s=><option key={s.id} value={s.id}>{s.name}</option>)}</select></label><div className="rounded-xl bg-neutral-50 p-3 text-xs text-neutral-600"><p className="font-medium text-neutral-800">Tips</p><ul className="list-inside list-disc space-y-1"><li>Puzzle shines on Mobile; Strategy is great on PC.</li><li>More features and fewer bugs = better reviews.</li><li>Engine level boosts reviews and shortens dev time.</li></ul></div></div><div className="mt-4 flex gap-2"><button onClick={()=>onStart({name,genre,platform,size})} className="flex-1 rounded-xl bg-indigo-600 px-4 py-2 text-white shadow hover:opacity-90">Start</button><button onClick={onClose} className="flex-1 rounded-xl border px-4 py-2 hover:bg-neutral-50">Cancel</button></div></div></div>)}function HIRE_POOL(){return[mkStaff("Ava",{design:55,code:30,art:40,qa:30},1800),mkStaff("Ben",{design:25,code:60,art:25,qa:30},1700),mkStaff("Kai",{design:35,code:40,art:55,qa:25},1600),mkStaff("Mia",{design:30,code:35,art:30,qa:60},1500),mkStaff("Noa",{design:40,code:40,art:40,qa:40},1900)]}
